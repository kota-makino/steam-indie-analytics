FROM mcr.microsoft.com/devcontainers/python:3.11-bullseye

# rootãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã‚·ã‚¹ãƒ†ãƒ ãƒ¬ãƒ™ãƒ«è¨­å®š
USER root

# ã‚·ã‚¹ãƒ†ãƒ æ›´æ–°ã¨å¿…è¦ãƒ„ãƒ¼ãƒ«
RUN apt-get update && apt-get install -y \
    curl \
    wget \
    git \
    vim \
    && rm -rf /var/lib/apt/lists/*

# Node.js 18 LTS ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
RUN curl -fsSL https://deb.nodesource.com/setup_18.x | bash - && \
    apt-get install -y nodejs && \
    node --version && \
    npm --version

# npmè¨­å®šã¨Claude Code ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
RUN npm config set prefix /usr/local && \
    npm install -g @anthropic-ai/claude-code && \
    npm list -g @anthropic-ai/claude-code

# vscodeãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æˆ»ã™
USER vscode
WORKDIR /workspace

# ç’°å¢ƒå¤‰æ•°ã¨ãƒ‘ã‚¹è¨­å®š
ENV PATH="/usr/local/bin:$PATH"
ENV NODE_PATH="/usr/local/lib/node_modules"

# vscodeãƒ¦ãƒ¼ã‚¶ãƒ¼ã®.bashrcã«ã‚¨ã‚¤ãƒªã‚¢ã‚¹è‡ªå‹•è¨­å®š
RUN echo '# Claude Code ã‚¨ã‚¤ãƒªã‚¢ã‚¹ï¼ˆè‡ªå‹•è¨­å®šï¼‰' >> ~/.bashrc && \
    echo 'alias claude-code="/usr/local/bin/claude"' >> ~/.bashrc && \
    echo 'alias claude="/usr/local/bin/claude"' >> ~/.bashrc && \
    echo '' >> ~/.bashrc && \
    echo '# é–‹ç™ºç’°å¢ƒæƒ…å ±è¡¨ç¤º' >> ~/.bashrc && \
    echo 'echo "ðŸš€ Dev Container Ready!"' >> ~/.bashrc && \
    echo 'echo "Claude Code: $(claude-code --version 2>/dev/null || echo \"Not available\")"' >> ~/.bashrc && \
    echo 'echo "Python: $(python --version)"' >> ~/.bashrc && \
    echo 'echo "Node.js: $(node --version)"' >> ~/.bashrc && \
    echo 'echo ""' >> ~/.bashrc
